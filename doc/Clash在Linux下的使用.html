<!DOCTYPE html>




<html class="theme-next pisces" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















  

<link href="//s4.zstatic.net/ajax/libs/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="tools,">










<meta name="description" content="程序运行环境 运行环境：RK3588平台H88K_V3设备运行Armbian_25.2 Kernel_6.1.84 参考借鉴：在Linux中使用Clash | Clash透明网关实践 | Clash配置文件解析 | Clash的搭建教程  12345678910111213141516# Clash 的 DNS 服务有两种类型，一种是 Fake-IP，另一种是 Redir-Host（半淘汰）。Cl">
<meta name="keywords" content="tools">
<meta property="og:type" content="article">
<meta property="og:title" content="Clash在Linux下的使用">
<meta property="og:url" content="https://leux.net/doc/Clash在Linux下的使用.html">
<meta property="og:site_name" content="云端笔记">
<meta property="og:description" content="程序运行环境 运行环境：RK3588平台H88K_V3设备运行Armbian_25.2 Kernel_6.1.84 参考借鉴：在Linux中使用Clash | Clash透明网关实践 | Clash配置文件解析 | Clash的搭建教程  12345678910111213141516# Clash 的 DNS 服务有两种类型，一种是 Fake-IP，另一种是 Redir-Host（半淘汰）。Cl">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2025-01-15T16:25:38.418Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Clash在Linux下的使用">
<meta name="twitter:description" content="程序运行环境 运行环境：RK3588平台H88K_V3设备运行Armbian_25.2 Kernel_6.1.84 参考借鉴：在Linux中使用Clash | Clash透明网关实践 | Clash配置文件解析 | Clash的搭建教程  12345678910111213141516# Clash 的 DNS 服务有两种类型，一种是 Fake-IP，另一种是 Redir-Host（半淘汰）。Cl">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://leux.net/doc/Clash在Linux下的使用.html">





  <title>Clash在Linux下的使用 | 云端笔记</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?bb55745d4569d920d7fc22daabdfc33d";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">云端笔记</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">学习的备忘录</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://leux.net/doc/Clash在Linux下的使用.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="leux">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="云端笔记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Clash在Linux下的使用</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2025-01-08T00:00:00+00:00">
                2025-01-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="程序运行环境"><a href="#程序运行环境" class="headerlink" title="程序运行环境"></a>程序运行环境</h1><ul>
<li>运行环境：<a href="https://github.com/armbian/community/releases" target="_blank" rel="noopener">RK3588平台H88K_V3设备运行Armbian_25.2 Kernel_6.1.84</a></li>
<li>参考借鉴：<a href="https://blog.iswiftai.com/posts/clash-linux/" target="_blank" rel="noopener">在Linux中使用Clash</a> | <a href="https://blog.zonowry.com/posts/build-a-proxy-gateway-based-on-iptables-and-clash/" target="_blank" rel="noopener">Clash透明网关实践</a> | <a href="https://wiki.metacubex.one/config/" target="_blank" rel="noopener">Clash配置文件解析</a> | <a href="https://bajie.dev/posts/20211108-clash/" target="_blank" rel="noopener">Clash的搭建教程</a></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Clash 的 DNS 服务有两种类型，一种是 Fake-IP，另一种是 Redir-Host（半淘汰）。Clash默认端口port通常是 7890，这个端口用于 HTTP 代理。</span></span><br><span class="line"></span><br><span class="line">Fake-IP 的原理：首先定义一个 Fake IP 池（198.18.0.1/16），所有的 DNS 查询服务都直接返回这个池子里的 IP，此时可以做到如果通过域名匹配到某条规则不是直连，可以将 DNS 放到远程服务器解析，借此解决 DNS 污染问题。这种场景下，因为所有返回的（目标） IP 都变成了 198.18.0.1/16，我们无法区分是内网还是外网，我们需要更新一下 clash 的配置，在 DNS 服务中提供了参数，在这里面的域名将保持在本地查询 DNS 同时返回真实的 IP。</span><br><span class="line"></span><br><span class="line">Redir-Host 的原理：首先查询不可信 DNS，如果返回了海外的 IP，则查询可信 DNS 并返回可信结果，如果返回国内 IP，就直接返回不可信结果。另外，此模式下所有的请求在转发时都发送 Host，而不是 IP，这样即使得到了污染 IP，远端仍然能解析出正确的 IP。</span><br><span class="line"></span><br><span class="line"><span class="comment"># 综合来看，玩游戏建议优先用 TUN 模式配合 Fake-IP，Fake-IP 会更快一点，但假IP也可能会导致某些情景下无法加载。虽然 Redir-Host 省心且不会有假IP污染DNS缓存的情况，但DNS泄露是在所难免的。</span></span><br><span class="line"></span><br><span class="line">Fake-IP 模式下ping特定域名如何返回真实IP：把需要返回真实IP的域名加到dns配置中的 fake-ip-filter 即可</span><br><span class="line">Fake-IP 模式下配合去广告 DNS 使用的时候，由于终端拿到的假 IP 不为空，有些没节操的软件会引发雪崩，即不断循环发请求，导致设备发热以及额外的流量消耗</span><br><span class="line"></span><br><span class="line"><span class="comment"># Clash 的工作模式（mode: rule）默认为规则模式，按配置文件中的规则对国内外流量进行分流。以下是其他一些模式：</span></span><br><span class="line">rule：  规则模式，按规则对流量进行分流</span><br><span class="line">direct：直连模式，所有流量不使用代理</span><br><span class="line">global：全局模式，所有流量都走代理</span><br><span class="line">script：脚本模式，仅 premium 版可用，允许用户编写脚本以编程的方式设置规则</span><br></pre></td></tr></table></figure>
<h1 id="在Linux中安装Clash"><a href="#在Linux中安装Clash" class="headerlink" title="在Linux中安装Clash"></a>在Linux中安装Clash</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># META 版本项目地址：https://github.com/MetaCubeX/mihomo/releases/</span></span><br><span class="line"><span class="comment"># OpenClash项目地址：https://github.com/vernesong/OpenClash/tree/core/master</span></span><br><span class="line"><span class="comment"># dev版本：	是初始的开源项目（clash-foss），dev和premium都是同一班人马，meta则是clash项目的另一个分支</span></span><br><span class="line"><span class="comment"># meta版本：	是基于dev版本修改的开源版本，相较于上面两个的区别是 vless支持，域名嗅探等功能</span></span><br><span class="line"><span class="comment"># premium版本：	是基于dev版本修改的闭源版本，用于clash for windows和clash for android，相较于dev版本多出了节点集、代理集等功能</span></span><br><span class="line"><span class="comment"># dev和premium都算是停止开发了，现在很多新特性和功能都是meta独有的，TUN模式meta内核一样支持</span></span><br><span class="line"></span><br><span class="line">wget https://raw.githubusercontent.com/vernesong/OpenClash/core/master/meta/clash-linux-arm64.tar.gz</span><br><span class="line">tar -xzvf clash-linux-arm64.tar.gz</span><br><span class="line">sudo mv clash /usr/<span class="built_in">local</span>/bin/clash</span><br><span class="line">sudo chmod +x /usr/<span class="built_in">local</span>/bin/clash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建文件夹，运行 clash 之前需要存在配置文件，否则 clash 无法启动：</span></span><br><span class="line">mkdir -p /home/leux/.config/clash/</span><br><span class="line">wget -O /home/leux/.config/clash/Country.mmdb https://github.com/Dreamacro/maxmind-geoip/releases/download/20241212/Country.mmdb</span><br><span class="line">wget -O /home/leux/.config/clash/config.yaml [你的订阅链接]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行如下命令启动Clash后将你要翻墙的设备设置【代理IP为：192.168.1.1  端口：7890】即可通过Clash访问外网</span></span><br><span class="line">sudo /usr/<span class="built_in">local</span>/bin/clash -d /home/leux/.config/clash/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为clash添加绑定低位端口的权限（可选），这样运行clash的时候可无需root权限</span></span><br><span class="line"><span class="comment"># sudo setcap cap_net_bind_service=+ep /usr/local/bin/clash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Windows手动代理：设置 -&gt; 网络和Internet -&gt; 代理 -&gt; 手动设置代理 -&gt; 打开并填入该IP地址和端口</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#########################################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行如下命令段来添加开机自启Clash程序的systemd服务文件：</span></span><br><span class="line">sudo cat &gt; /etc/systemd/system/clash.service &lt;&lt; EOF</span><br><span class="line">[Unit]</span><br><span class="line">Description=Clash Service</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">User=root</span><br><span class="line">ExecStart=/usr/<span class="built_in">local</span>/bin/clash -d /home/leux/.config/clash/</span><br><span class="line">Restart=on-failure</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h1 id="Clash配置文件解析"><a href="#Clash配置文件解析" class="headerlink" title="Clash配置文件解析"></a>Clash配置文件解析</h1><ol>
<li>全局配置</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># port: 7890			# HTTP(S) 代理服务器端口</span></span><br><span class="line"><span class="comment"># socks-port: 7891		# SOCKS5 代理端口</span></span><br><span class="line"><span class="comment"># redir-port: 7892		# 透明代理端口，用于 Linux 和 MacOS</span></span><br><span class="line">mixed-port: 10801		<span class="comment"># HTTP(S) 和 SOCKS 代理混合端口</span></span><br><span class="line"></span><br><span class="line">ipv6: <span class="literal">true</span>			<span class="comment"># # 开启IPv6总开关，关闭阻断所有IPv6链接和屏蔽DNS请求AAAA记录。可选值 true/false，默认为 true</span></span><br><span class="line">mode: rule			<span class="comment"># 运行模式。rule 规则匹配（默认），direct 全局直连，global 全局代理 (需要在 GLOBAL 策略组选择代理/策略)</span></span><br><span class="line">allow-lan: <span class="literal">true</span>			<span class="comment"># 允许其他局域网设备经过Clash的代理端口访问互联网。可选值 true/false</span></span><br><span class="line">interface-name: en0		<span class="comment"># Clash的流量出站接口</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绑定地址，仅允许其他设备通过这个地址访问</span></span><br><span class="line"><span class="built_in">bind</span>-address: <span class="string">"*"</span>		<span class="comment"># "*" 绑定所有IP地址，192.168.1.1 绑定单个IPV4地址，[ff06::c3] 绑定单个IPV6地址</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Clash内核输出日志的等级，仅在控制台和控制页面输出</span></span><br><span class="line"><span class="built_in">log</span>-level: info			<span class="comment"># silent 静默不输出，error 仅输出发生错误至无法使用的日志，warning 输出发生错误但不影响运行的日志，以及 error 级别内容，info 输出一般运行的内容，以及 error 和 warning 级别的日志，debug 尽可能的输出运行中所有的信息</span></span><br><span class="line"></span><br><span class="line">secret: <span class="string">""</span>			<span class="comment"># API 的访问密钥</span></span><br><span class="line">external-controller: 127.0.0.1:9090	<span class="comment"># 外部控制器API监听地址，你可以将 127.0.0.1 修改为 0.0.0.0 来监听所有 IP</span></span><br><span class="line">external-ui: /path/to/ui/folder	<span class="comment"># 外部用户界面，可将静态网页资源 (比如Clash-dashboard) 运行在 Clash API, 路径为 API 地址/ui</span></span><br><span class="line">external-ui-name: xd		<span class="comment"># 自定义外部用户界面名字，合并为 external-ui/xd</span></span><br><span class="line">external-ui-url: <span class="string">"https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"</span> <span class="comment"># 从GitHub获取外部用户界面下载地址</span></span><br><span class="line"></span><br><span class="line">geo-auto-update: <span class="literal">false</span>		<span class="comment"># 是否自动更新GEOIP</span></span><br><span class="line">geo-update-interval: 24		<span class="comment"># 更新间隔，单位为小时</span></span><br><span class="line">geodata-mode: <span class="literal">true</span>		<span class="comment"># 更改GEOIP使用文件，mmdb 或者 dat，可选 true/false，true为 dat，此项有默认值 false</span></span><br><span class="line">geodata-loader: memconservative	<span class="comment"># GEOIP文件加载模式，standard：标准加载器，memconservative：专为内存受限 (小内存) 设备优化的加载器 (默认值)</span></span><br><span class="line">geox-url:			<span class="comment"># 自定 GEO 下载地址</span></span><br><span class="line">  geoip: <span class="string">"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat"</span></span><br><span class="line">  geosite: <span class="string">"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"</span></span><br><span class="line">  mmdb: <span class="string">"https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb"</span></span><br><span class="line">  asn: <span class="string">"https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb"</span></span><br><span class="line"></span><br><span class="line">authentication:			<span class="comment"># http,socks 入口的验证用户名，密码</span></span><br><span class="line">  - <span class="string">"user1:pass1"</span></span><br><span class="line">  - <span class="string">"user2:pass2"</span></span><br><span class="line"></span><br><span class="line">skip-auth-prefixes:		<span class="comment"># 设置允许跳过验证的 IP 段</span></span><br><span class="line">  - 127.0.0.1/8</span><br><span class="line">  - ::1/128</span><br><span class="line"></span><br><span class="line">lan-allowed-ips:		<span class="comment"># 允许连接的 IP 地址段，仅作用于 allow-lan 为 true, 默认值为 0.0.0.0/0 和::/0</span></span><br><span class="line">  - 0.0.0.0/0</span><br><span class="line">  - ::/0</span><br><span class="line"></span><br><span class="line">lan-disallowed-ips:		<span class="comment"># 禁止连接的 IP 地址段，黑名单优先级高于白名单，默认值为空</span></span><br><span class="line">  - 192.168.0.3/32</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>DNS配置</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">dns:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span>			<span class="comment"># 是否启用，如为 false，则使用系统 DNS 解析</span></span><br><span class="line">  prefer-h3: <span class="literal">false</span>		<span class="comment"># DOH 优先使用 http/3</span></span><br><span class="line">  use-hosts: <span class="literal">true</span>		<span class="comment"># 是否回应配置中的 hosts，默认 true</span></span><br><span class="line">  use-system-hosts: <span class="literal">true</span>	<span class="comment"># 是否查询系统 hosts，默认 true</span></span><br><span class="line">  respect-rules: <span class="literal">false</span>		<span class="comment"># dns 连接遵守路由规则，需配置 proxy-server-nameserver</span></span><br><span class="line">  listen: 0.0.0.0:1053		<span class="comment"># DNS 服务监听，仅支持 udp</span></span><br><span class="line">  ipv6: <span class="literal">false</span>			<span class="comment"># 是否解析 IPV6, 如为 false, 则回应 AAAA 的空解析</span></span><br><span class="line">  default-nameserver:		<span class="comment"># 默认DNS, 用于解析DNS服务器的域名，必须为IP, 可为加密DNS</span></span><br><span class="line">    - 223.5.5.5</span><br><span class="line">  enhanced-mode: fake-ip	<span class="comment"># Clash的DNS处理模式，可选值 fake-ip / redir-host（默认）</span></span><br><span class="line">  fake-ip-range: 198.18.0.1/16	<span class="comment"># fakeip 下的 IP 段设置，tun 的默认 IPV4 地址 也使用此值作为参考</span></span><br><span class="line">  fake-ip-filter-mode: blacklist <span class="comment"># 可选 blacklist/whitelist，默认blacklist，whitelist 即只有匹配成功才返回 fake-ip</span></span><br><span class="line">  fake-ip-filter:		<span class="comment"># fakeip 过滤，以下地址不会下发 fakeip 映射用于连接，值支持域名通配以及引入域名集合</span></span><br><span class="line">    - <span class="string">'*.lan'</span></span><br><span class="line">    - <span class="string">"+.*"</span>			<span class="comment"># 本通配符可回退所有域名，此时fakeip就完全变成了redir-host（不建议）</span></span><br><span class="line">  nameserver-policy:		<span class="comment"># 指定域名查询的解析服务器，可使用 geosite, 优先于 nameserver/fallback 查询，键支持域名通配，值支持字符串/数组</span></span><br><span class="line">    <span class="string">'+.arpa'</span>: <span class="string">'10.0.0.1'</span></span><br><span class="line">    <span class="string">'rule-set:cn'</span>:</span><br><span class="line">    - https://doh.pub/dns-query</span><br><span class="line">    - https://dns.alidns.com/dns-query</span><br><span class="line">  nameserver:			<span class="comment"># 默认的域名解析服务器</span></span><br><span class="line">    - https://doh.pub/dns-query</span><br><span class="line">    - https://dns.alidns.com/dns-query</span><br><span class="line">  fallback:			<span class="comment"># 后备域名解析服务器，一般情况下使用境外 DNS, 保证结果可信，配置 fallback后默认启用 fallback-filter,geoip-code为 cn</span></span><br><span class="line">    - tls://8.8.4.4</span><br><span class="line">    - tls://1.1.1.1</span><br><span class="line">  proxy-server-nameserver:	<span class="comment"># 代理节点域名解析服务器，仅用于解析代理节点的域名，如果不填则遵循nameserver-policy、nameserver和fallback的配置</span></span><br><span class="line">    - https://doh.pub/dns-query</span><br><span class="line">  direct-nameserver:		<span class="comment"># 用于direct出口域名解析的 DNS 服务器，如果不填则遵循nameserver-policy、nameserver和fallback的配置</span></span><br><span class="line">    - system</span><br><span class="line">  direct-nameserver-follow-policy: <span class="literal">false</span> <span class="comment"># 是否遵循nameserver-policy，默认为不遵守，仅当direct-nameserver不为空时生效</span></span><br><span class="line">  fallback-filter:		<span class="comment"># 后备域名解析服务器筛选，满足条件的将使用 fallback结果或只使用 fallback解析</span></span><br><span class="line">    geoip: <span class="literal">true</span>			<span class="comment"># 是否启用 geoip 判断</span></span><br><span class="line">    geoip-code: CN		<span class="comment"># 可选值为 国家缩写，默认值为 CN，除了 geoip-code 配置的国家 IP, 其他的 IP 结果会被视为污染，geoip-code 配置的国家的结果会直接采用，否则将采用 fallback结果</span></span><br><span class="line">    geosite:			<span class="comment"># 可选值为对于的 geosite 内包含的集合，geosite 列表的内容被视为已污染，匹配到 geosite 的域名，将只使用 fallback解析，不去使用 nameserver</span></span><br><span class="line">      - gfw</span><br><span class="line">    ipcidr:			<span class="comment"># 书写内容为 IP/掩码，这些网段的结果会被视为污染，nameserver解析出这些结果时将会采用 fallback的解析结果</span></span><br><span class="line">      - 240.0.0.0/4</span><br><span class="line">    domain:			<span class="comment"># 这些域名被视为已污染，匹配到这些域名，会直接使用 fallback解析，不去使用 nameserver</span></span><br><span class="line">      - <span class="string">'+.google.com'</span></span><br><span class="line">      - <span class="string">'+.facebook.com'</span></span><br><span class="line">      - <span class="string">'+.youtube.com'</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>TUN配置</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">tun:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">false</span></span><br><span class="line">  device: utun0			<span class="comment"># 指定TUN网卡名称，MacOS设备只能使用 utun 开头的网卡名</span></span><br><span class="line">  stack: system			<span class="comment"># TUN模式堆栈，如无使用问题建议使用 mixed 栈，可用值： system/mixed/gvisor(默认)</span></span><br><span class="line">  auto-route: <span class="literal">true</span>		<span class="comment"># 配置路由表</span></span><br><span class="line">  auto-redirect: <span class="literal">false</span>		<span class="comment"># 自动配置 iptables 以重定向 TCP 连接。仅支持 Linux。带有 auto-redirect 的 auto-route 现在可以在路由器上按预期工作，无需干预。</span></span><br><span class="line">  auto-detect-interface: <span class="literal">true</span>	<span class="comment"># 自动识别出口网卡</span></span><br><span class="line">  mtu: 9000			<span class="comment"># 最大传输单元</span></span><br><span class="line">  gso: <span class="literal">false</span>			<span class="comment"># 启用通用分段卸载，仅支持 Linux</span></span><br><span class="line">  gso-max-size: 65536		<span class="comment"># 通用分段卸载包的最大大小</span></span><br><span class="line">  strict-route: <span class="literal">true</span>		<span class="comment"># 将所有连接路由到 tun 来防止泄漏，但你的设备将无法其他设备被访问</span></span><br><span class="line">  dns-hijack:			<span class="comment"># 需要劫持的 DNS</span></span><br><span class="line">    - 0.0.0.0:53</span><br><span class="line">  route-address-set:		<span class="comment"># 将指定规则集中的目标 IP CIDR 规则添加到防火墙, 不匹配的流量将绕过路由, 仅支持 Linux，且需要 nftables，`auto-route` 和 `auto-redirect` 已启用。</span></span><br><span class="line">    - ruleset-1</span><br><span class="line">    - ruleset-2</span><br><span class="line">  route-exclude-address-set:	<span class="comment"># 将指定规则集中的目标 IP CIDR 规则添加到防火墙, 匹配的流量将绕过路由, 仅支持 Linux，且需要 nftables，`auto-route` 和 `auto-redirect` 已启用。</span></span><br><span class="line">    - ruleset-3</span><br><span class="line">    - ruleset-4</span><br><span class="line">  route-address:		<span class="comment"># 启用 auto-route 时使用自定义路由而不是默认路由</span></span><br><span class="line">    - 0.0.0.0/1</span><br><span class="line">    - 128.0.0.0/1</span><br><span class="line">    - <span class="string">"::/1"</span></span><br><span class="line">    - <span class="string">"8000::/1"</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>路由规则</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">rules:						# 规则将按照从上到下的顺序匹配，列表顶部的规则优先级高于其底下的规则</span><br><span class="line">  - &apos;IP-CIDR,127.0.0.0/8,DIRECT&apos;		# 匹配IP地址范围，IP-CIDR和IP-CIDR6效果是一样的，IP-CIDR6只是一个别名</span><br><span class="line">  - &apos;IP-CIDR6,fe80::/10,DIRECT&apos;</span><br><span class="line">  - &apos;DOMAIN,local.adguard.org,DIRECT&apos;		# 精确匹配某个域名</span><br><span class="line">  - &apos;DOMAIN-SUFFIX,cn,DIRECT&apos;</span><br><span class="line">  - &apos;DOMAIN-SUFFIX,youtu.be,OKZTWO&apos;		# 匹配域名的后缀</span><br><span class="line">  - &apos;DOMAIN-KEYWORD,usage,REJECT&apos;</span><br><span class="line">  - &apos;DOMAIN-KEYWORD,google,OKZTWO&apos;		# 匹配包含指定关键字的域名</span><br><span class="line">  - &apos;GEOIP,CN,DIRECT&apos;				# 匹配 IP 所属国家代码</span><br><span class="line">  - &apos;MATCH,OKZTWO&apos;				# 匹配所有剩余流量，通常用于兜底规则</span><br><span class="line"></span><br><span class="line"># 高优先级规则放在顶部。常见规则放在中间。MATCH（兜底规则）放在底部，确保所有流量都有处理。</span><br><span class="line">PROXY		# 使用代理策略组，例如上面的 OKZTWO</span><br><span class="line">DIRECT		# 直连，不使用代理</span><br><span class="line">REJECT		# 拦截流量，丢弃请求</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>代理节点</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">proxies:</span><br><span class="line">  - &#123; name: 专线4, type:  vmess, server: hk.abc.com, port: 60237, uuid: 12345678-1234-4888-ac86-0123388099ca, alterId: 0, cipher: auto, udp: true &#125;</span><br><span class="line">  - &#123; name: &apos;韩国2&apos; type: trojan, server: kr.abc.com, port: 60195, password: 12345678-1234-4888-ac86-0123388099ca, udp: true, sni: kr.dns.com &#125;</span><br><span class="line"></span><br><span class="line">name		# 必须项，代理名称，不可重复</span><br><span class="line">type		# 必须项，代理节点类型</span><br><span class="line">server		# 必须项，代理节点服务器 (域名/ip)</span><br><span class="line">port		# 必须项，代理节点端口</span><br><span class="line">udp		# 是否允许 UDP 通过代理，默认为 false</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>代理策略组</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">proxy-groups:</span><br><span class="line">  - &#123; name: OKZTWO, type: select, proxies: [自动选择, 故障转移, 专线4, &apos;韩国2&apos;] &#125;</span><br><span class="line">  - &#123; name: 自动选择, type: url-test, proxies: [专线4, &apos;韩国2&apos;], url: &apos;http://www.gstatic.com/generate_204&apos;, interval: 86400 &#125;</span><br><span class="line">  - &#123; name: 故障转移, type: fallback, proxies: [专线4, &apos;韩国2&apos;], url: &apos;http://www.gstatic.com/generate_204&apos;, interval: 7200 &#125;</span><br><span class="line"></span><br><span class="line">name		# 必须项，策略组的名字，如有特殊符号，应当使用引号将其包裹</span><br><span class="line">type		# 必须项，策略组的类型</span><br><span class="line">proxies		# 该组内包含的具体代理节点的列表</span><br><span class="line">url		# 健康检查测试地址</span><br><span class="line">interval	# 健康检查间隔，如不为 0 则启用定时测试，单位为秒</span><br><span class="line"></span><br><span class="line">策略组的类型 (type:) 有以下几种：</span><br><span class="line">select:		# 手动选择。用户可以在客户端中手动选择具体节点。</span><br><span class="line">url-test:	# 自动测试所有节点的延迟，并选择最快的节点。</span><br><span class="line">fallback:	# 备用机制。主要节点不可用时切换到可用的节点。</span><br><span class="line">load-balance:	# 负载均衡，在多个节点间分配流量。</span><br></pre></td></tr></table></figure>
<h1 id="添加WEB控制界面"><a href="#添加WEB控制界面" class="headerlink" title="添加WEB控制界面"></a>添加WEB控制界面</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改配置文件 /home/leux/.config/clash/config.yaml 中WEB控制界面的参数</span></span><br><span class="line">external-controller: 0.0.0.0:9090	<span class="comment"># 控制面板端口（允许任意IP访问）</span></span><br><span class="line">external-ui: <span class="string">"/ui"</span>			<span class="comment"># 界面所在路径（填文件夹的路径）</span></span><br><span class="line">secret: <span class="string">"1234567890"</span>			<span class="comment"># 控制面板密码（访问密码可选）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载并拷贝WEB控制界面到指定路径</span></span><br><span class="line">wget https://github.com/haishanh/yacd/archive/gh-pages.zip</span><br><span class="line">unzip gh-pages.zip</span><br><span class="line">mv yacd-gh-pages/ /home/leux/.config/ui/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 最后可通过【运行Clash的设备IP地址和端口号】加界面路径访问控制页面：http://192.168.1.1:9090/ui/</span></span><br></pre></td></tr></table></figure>
<h1 id="局域网下设备无感代理"><a href="#局域网下设备无感代理" class="headerlink" title="局域网下设备无感代理"></a>局域网下设备无感代理</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用Clash中TUN功能可以自动对操作系统的路由表、路由规则和重定向的管理</span></span><br><span class="line"><span class="comment"># 开启TUN功能后LAN下DHCP接入的设备无需手动设置代理即可访问墙外网站，但运行Clash时需要使用root权限</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加或修改配置文件 /home/leux/.config/clash/config.yaml 中TUN功能参数</span></span><br><span class="line">tun:</span><br><span class="line">    <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">    stack: system				<span class="comment"># TUN模式堆栈，如无使用问题建议使用 mixed 栈，可用值： system/mixed/gvisor(默认)</span></span><br><span class="line">    auto-route: <span class="literal">true</span>				<span class="comment"># 自动设置全局路由，可以自动将全局流量路由进入 tun 网卡</span></span><br><span class="line">    auto-redirect: <span class="literal">true</span>				<span class="comment"># 仅支持 Linux，自动配置 iptables/nftables 以重定向 TCP 连接，需要auto-route已启用（需要内核netlink支持）</span></span><br><span class="line">    auto-detect-interface: <span class="literal">true</span>			<span class="comment"># 自动选择流量出口接口，多出口网卡同时连接的设备建议手动指定出口网卡，与 interface-name: 参数冲突</span></span><br><span class="line">    <span class="comment">#device: utun0				# 指定TUN网卡名称，MacOS设备只能使用 utun 开头的网卡名</span></span><br><span class="line">    <span class="comment">#dns-hijack:				# DNS劫持，将匹配到的连接导入内部DNS模块，默认协议为 udp://</span></span><br><span class="line">      <span class="comment"># - 198.18.0.2:53				# 当 "fake-ip-range" 是 198.18.0.1/16, 应该劫持 198.18.0.2:53</span></span><br><span class="line">      <span class="comment">#- 1.0.0.1:53</span></span><br><span class="line">      <span class="comment">#- tcp://8.8.8.8:53</span></span><br><span class="line">      <span class="comment">#- any:53</span></span><br><span class="line">      <span class="comment">#- tcp://any:53				# 代表接管局域网中所有IP的53端口请求</span></span><br></pre></td></tr></table></figure>
<h1 id="自用Clash配置部分示例"><a href="#自用Clash配置部分示例" class="headerlink" title="自用Clash配置部分示例"></a>自用Clash配置部分示例</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在Linux下使用networking，dnsmasq，hostapd搭建无线路由器能实现LAN下设备无感代理的配置(Fake-IP类型 + TUN模式)</span></span><br><span class="line">mixed-port: 7890</span><br><span class="line">allow-lan: <span class="literal">true</span></span><br><span class="line"><span class="built_in">bind</span>-address: <span class="string">'*'</span></span><br><span class="line">mode: rule</span><br><span class="line"><span class="built_in">log</span>-level: info</span><br><span class="line">external-controller: <span class="string">'0.0.0.0:9090'</span></span><br><span class="line">external-ui: <span class="string">"/ui"</span></span><br><span class="line">dns:</span><br><span class="line">    <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">    ipv6: <span class="literal">false</span></span><br><span class="line">    default-nameserver: [223.5.5.5, 119.29.29.29]</span><br><span class="line">    enhanced-mode: fake-ip</span><br><span class="line">    fake-ip-range: 198.18.0.1/16</span><br><span class="line">    use-hosts: <span class="literal">true</span></span><br><span class="line">    nameserver: [<span class="string">'https://doh.pub/dns-query'</span>, <span class="string">'https://dns.alidns.com/dns-query'</span>]</span><br><span class="line">    fallback: [<span class="string">'https://doh.dns.sb/dns-query'</span>, <span class="string">'https://dns.cloudflare.com/dns-query'</span>, <span class="string">'https://dns.twnic.tw/dns-query'</span>, <span class="string">'tls://8.8.4.4:853'</span>]</span><br><span class="line">    fallback-filter: &#123; geoip: <span class="literal">true</span>, ipcidr: [240.0.0.0/4, 0.0.0.0/32] &#125;</span><br><span class="line">tun:</span><br><span class="line">    <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">    stack: system</span><br><span class="line">    auto-route: <span class="literal">true</span></span><br><span class="line">    auto-redir: <span class="literal">true</span></span><br><span class="line">    auto-detect-interface: <span class="literal">true</span></span><br><span class="line">proxies:</span><br><span class="line">......</span><br><span class="line">proxy-groups:</span><br><span class="line">......</span><br><span class="line">rules:</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/tools/" rel="tag"># tools</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/doc/LVGL学习之Windows编译运行.html" rel="next" title="LVGL学习之Windows编译运行">
                <i class="fa fa-chevron-left"></i> LVGL学习之Windows编译运行
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">leux</p>
              <p class="site-description motion-element" itemprop="description">学习的备忘录</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">89</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#程序运行环境"><span class="nav-number">1.</span> <span class="nav-text">程序运行环境</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#在Linux中安装Clash"><span class="nav-number">2.</span> <span class="nav-text">在Linux中安装Clash</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Clash配置文件解析"><span class="nav-number">3.</span> <span class="nav-text">Clash配置文件解析</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#添加WEB控制界面"><span class="nav-number">4.</span> <span class="nav-text">添加WEB控制界面</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#局域网下设备无感代理"><span class="nav-number">5.</span> <span class="nav-text">局域网下设备无感代理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#自用Clash配置部分示例"><span class="nav-number">6.</span> <span class="nav-text">自用Clash配置部分示例</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">leux</span>

  
</div>








  <div class="footer-custom"><a target="_blank" href="https://beian.miit.gov.cn/">湘ICP备2023036155号</a></div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>




















  
  
    <script type="text/javascript" src="//s4.zstatic.net/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  

  
  
    <script type="text/javascript" src="//s4.zstatic.net/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
  

  
  
    <script type="text/javascript" src="//s4.zstatic.net/ajax/libs/jquery_lazyload/1.9.7/jquery.lazyload.min.js"></script>
  

  
  
    <script type="text/javascript" src="//s4.zstatic.net/ajax/libs/velocity/1.2.1/velocity.min.js"></script>
  

  
  
    <script type="text/javascript" src="//s4.zstatic.net/ajax/libs/velocity/1.2.1/velocity.ui.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
